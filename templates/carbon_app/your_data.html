{% extends "layout.html" %}

{% block title %}Your Data{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='carbon_app/your_data.css') }}">
{% endblock %}

{% block content %}

<!-- ðŸ”¹ Background immagine -->
<div class="image-background">
  <img src="{{ url_for('static', filename='images/trainbackground.jpg') }}" alt="Background" id="bg-image">
  <div class="image-overlay"></div>
</div>

<div class="your-data-container">
  <h1>Your Emission Data</h1>
  <p class="subtitle">Here you can see all your submitted transport entries and manage them.</p>

  <!-- ðŸ”¹ Pulsante New Entry -->
  <div class="btn-new-entry">
    <a href="{{ url_for('carbon_app.carbon_app_home') }}" class="btn-submit">New Entry</a>
  </div>

  <!-- ðŸ”¹ Flash messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
          {% for category, message in messages %}
              <div class="alert alert-{{ category }}">{{ message }}</div>
          {% endfor %}
      {% endif %}
  {% endwith %}

  <!-- ðŸ”¹ Tabella -->
  <div class="table-card">
    <table class="table">
      <thead>
        <tr>
          <th>User</th>
          <th>Date</th>
          <th>Kilometres</th>
          <th>Transport</th>
          <th>Fuel</th>
          <th>CO2</th>
          <th>CH4</th>
          <th>Total</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        {% for entry in entries %}
        <tr>
          <td>{{ current_user.username }}</td>
          <td>{{ entry.date.strftime("%m-%d-%Y") }}</td>
          <td>{{ entry.kms }}</td>
          <td>{{ entry.transport }}</td>
          <td>{{ entry.fuel }}</td>
          <td>{{ entry.co2 }}</td>
          <td>{{ entry.ch4 }}</td>
          <td>{{ entry.total }}</td>
          <td>
            <a href="{{ url_for('carbon_app.delete_emission', entry_id=entry.id) }}" 
               class="btn-delete">Delete</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="back-link">
    <a href="{{ url_for('carbon_app.carbon_app_home') }}">
      <i class="fa-solid fa-arrow-left"></i> Back to Carbon App
    </a>
  </div>
</div>

{% endblock %}
